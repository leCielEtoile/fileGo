# ==============================================
# Docker Compose Environment Variables
# ==============================================
# デプロイ時はこのファイルを .env にコピーして設定を編集してください
# cp .env.example .env

# ----------------------------------------------
# Docker設定
# ----------------------------------------------

# Dockerイメージタグ
# - latest: 最新版（mainブランチ）
# - v1.0.0: 特定バージョン
# - main-abc1234: 特定コミット
IMAGE_TAG=latest

# ホスト側のポート番号
HOST_PORT=8080

# タイムゾーン
TZ=Asia/Tokyo

# ----------------------------------------------
# アプリケーション設定
# ----------------------------------------------
# 注意: 環境変数はconfig.yamlの設定より優先されます
# セキュアな情報（Discord Token/Secret）は環境変数での設定を推奨

# サーバー設定
SERVER_PORT=8080
SERVER_SERVICE_NAME=Discord File Server
SERVER_BEHIND_PROXY=true
# カンマ区切りで複数指定可能
SERVER_TRUSTED_PROXIES=172.16.0.0/12,10.0.0.0/8,192.168.0.0/16

# Discord設定（必須：本番環境では必ず環境変数で設定してください）
DISCORD_BOT_TOKEN=YOUR_BOT_TOKEN_HERE
DISCORD_CLIENT_ID=YOUR_CLIENT_ID_HERE
DISCORD_CLIENT_SECRET=YOUR_CLIENT_SECRET_HERE
DISCORD_GUILD_ID=YOUR_GUILD_ID_HERE
DISCORD_REDIRECT_URL=https://yourdomain.com/auth/callback

# データベース設定
DATABASE_PATH=/root/config/fileserver.db
DATABASE_MAX_CONNECTIONS=10

# ストレージ設定
STORAGE_UPLOAD_PATH=/root/data/uploads
STORAGE_MAX_FILE_SIZE=104857600
STORAGE_CHUNK_SIZE=20971520
STORAGE_MAX_CHUNK_FILE_SIZE=536870912000
STORAGE_MAX_CONCURRENT_UPLOADS=3
STORAGE_CHUNK_UPLOAD_ENABLED=true
STORAGE_UPLOAD_SESSION_TTL=48h
STORAGE_CLEANUP_INTERVAL=1h
STORAGE_ADMIN_ROLE_ID=123456789012345678

# ----------------------------------------------
# 設定例
# ----------------------------------------------

# 開発環境の例:
# IMAGE_TAG=latest
# HOST_PORT=8080
# SERVER_PORT=8080
# DISCORD_REDIRECT_URL=http://localhost:8080/auth/callback

# 本番環境の例:
# IMAGE_TAG=v1.0.0
# HOST_PORT=80
# SERVER_PORT=8080
# SERVER_BEHIND_PROXY=true
# DISCORD_REDIRECT_URL=https://files.example.com/auth/callback

# カスタムポートの例:
# HOST_PORT=3000
# SERVER_PORT=8080

# ファイルサイズ制限を変更する例:
# STORAGE_MAX_FILE_SIZE=209715200  # 200MB
# STORAGE_MAX_CHUNK_FILE_SIZE=1073741824000  # 1TB
